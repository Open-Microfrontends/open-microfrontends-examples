$schema: 'https://open-microfrontends.org/schemas/1-0-0.json'
openMicrofrontends: 1.0.0
servers:
- url: 'http://localhost:7830'
  description: Local Test Server
securitySchemes:
  ApiKeyAuth:
    type: apiKey
    in: header
    name: X-API-KEY
microfrontends:
- name: OpenMicrofrontends Example API Proxy with Security
  assets:
    basePath: /public
    buildManifestPath: /package.json
    js:
      moduleSystem: ESM
      initial:
      - Microfrontend.js
  rendererFunctionName: startApiProxySecurityMicrofrontend
  userPermissions:
    provided:
      path: /permissions
      security:
      - ApiKeyAuth: [ ]
    permissions:
      - name: showJoke
        description: Permission to see the random Chuck Norris joke ;-)
  apiProxies:
    bff:
      path: /api
      security:
      - ApiKeyAuth: [ ]
    chuckNorrisJoke:
      targets:
      - url: https://api.chucknorris.io/jokes/random
  config:
    schema:
      type: object
      properties:
        customerId:
          type: string
          description: The customer ID
      required:
        - customerId
    default:
      customerId: '1000'
  annotations:
    MY_COCKPIT_INTEGRATION:
      displays: CUSTOMER
