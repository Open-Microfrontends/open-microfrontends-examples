openMicrofrontends: 1.0.0
servers:
- url: 'http://localhost:7830'
  description: Local Test Server
securitySchemes:
  ApiKeyAuth:
    type: apiKey
    in: header
    name: X-API-KEY
microfrontends:
- name: OpenMicrofrontends Example API Proxy with Security
  assets:
    basePath: /public
    js:
      moduleSystem: ESM
      initial:
      - Microfrontend.js
  rendererFunctionName: startApiProxySecurityMicrofrontend
  frontendPermissions:
  - name: showJoke
    description: Permission to see the random Chuck Norris joke ;-)
  apiProxies:
    bff:
      bffPath: /api
      security:
      - ApiKeyAuth: [ ]
    chuckNorrisJoke:
      targets:
      - url: https://api.chucknorris.io/jokes/random
  config:
    schema:
      type: object
      properties:
        customerId:
          type: string
          description: The customer ID
      required:
        - customerId
    default:
      customerId: '1000'
  annotations:
    MASHROOM_PROXY_ACCESS_ROLES:
      bff:
        - Authenticated
